<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="laminas-test">  
    <link rel="canonical" href="https://docs.laminas.dev/laminas-test/assertions/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Assertions - laminas-test - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
</head>
<body id="page-top" class="mvc">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand offset-md-2" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="https://docs.laminas.dev/components">Components</a>
                            <a class="dropdown-item" href="https://docs.mezzio.dev/">Mezzio</a>
                            <a class="dropdown-item" href="https://api-tools.getlaminas.org/">API Tools</a>
                            <a class="dropdown-item" href="https://docs.laminas.dev/mvc">MVC</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-test</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../phpunit/" class="subnavigation__link">Unit testing with PHPUnit</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Assertions</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-6 offset-md-2">
                <h1 class="header__title">
                    MVC

                    
                        <small class="header__subtitle">laminas-test</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-sm-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-test/" class="header__link header__link--github" title="Go to repository of laminas-test">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-sm-12">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#request-assertions" class="toc__link">Request Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#css-selector-assertions" class="toc__link">CSS Selector Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#xpath-assertions" class="toc__link">XPath Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#redirect-assertions" class="toc__link">Redirect Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#response-header-assertions" class="toc__link">Response Header Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#other-assertions" class="toc__link">Other Assertions</a>
                    </li>
                
            </ul>
        </div>
    

                
            </div>
            <div class="col-md-7 col-sm-12 content" role="main" data-spy="scroll" data-target=".toc">
                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/mvc/">MVC</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-test</a></li>

                

                <li class="breadcrumb-item active" aria-current="page">Assertions</li>
            
        
    </ol>
</nav>






    
    

    <h1 id="assertions">Assertions</h1>
<p>Assertions are at the heart of unit testing; you use them to verify that the
results are what you expect. To this end, <code>Laminas\Test\PHPUnit\AbstractControllerTestCase</code>
provides a number of assertions to make testing your MVC apps and controllers
simpler.</p>
<h2 id="request-assertions">Request Assertions</h2>
<p>It's often useful to assert against the last run action, controller, and module;
additionally, you may want to assert against the route that was matched. The
following assertions can help you in this regard:</p>
<ul>
<li><code>assertModulesLoaded(array $modules)</code>: Assert that the given modules were
  loaded by the application.</li>
<li><code>assertModuleName($module)</code>: Assert that the given module was used in the last
  dispatched action.</li>
<li><code>assertControllerName($controller)</code>: Assert that the given controller
  identifier was selected in the last dispatched action.</li>
<li><code>assertControllerClass($controller)</code>: Assert that the given controller class
  was selected in the last dispatched action.</li>
<li><code>assertActionName($action)</code>: Assert that the given action was last dispatched.</li>
<li><code>assertMatchedRouteName($route)</code>: Assert that the given named route was
  matched by the router.</li>
</ul>
<p>Each also has a 'Not' variant for negative assertions.</p>
<h2 id="css-selector-assertions">CSS Selector Assertions</h2>
<p>CSS selectors are an easy way to verify that certain artifacts are present in
the response content.  They also make it trivial to ensure that items necessary
for JavaScript UIs and/or AJAX integration will be present; most JS toolkits
provide some mechanism for manipulating DOM elements based on CSS selectors, so
the syntax would be the same.</p>
<p>This functionality is provided via <a href="https://docs.laminas.dev/laminas-dom/query/">Laminas\Dom\Query</a>,
and integrated into a set of 'Query' assertions. Each of these assertions takes
as their first argument a CSS selector, with optionally additional arguments
and/or an error message, based on the assertion type. You can find the rules for
writing the CSS selectors in the laminas-dom <a href="https://docs.laminas.dev/laminas-dom/query/#theory-of-operation">Theory of Operation</a>
chapter. Query assertions include:</p>
<ul>
<li><code>assertQuery($path)</code>: assert that one or more DOM elements matching the given
  CSS selector are present.</li>
<li><code>assertQueryContentContains($path, $match)</code>: assert that one or more DOM
  elements matching the given CSS selector are present, and that at least one
  contains the content provided in <code>$match</code>.</li>
<li><code>assertQueryContentRegex($path, $pattern)</code>: assert that one or more DOM
  elements matching the given CSS selector are present, and that at least one
  matches the regular expression provided in <code>$pattern</code>.</li>
<li><code>assertQueryCount($path, $count)</code>: assert that there are exactly <code>$count</code> DOM
  elements matching the given CSS selector present.</li>
<li><code>assertQueryCountMin($path, $count)</code>: assert that there are at least <code>$count</code>
  DOM elements matching the given CSS selector present.</li>
<li><code>assertQueryCountMax($path, $count)</code>: assert that there are no more than
  <code>$count</code> DOM elements matching the given CSS selector present.</li>
</ul>
<p>All queries above also allow an optional <code>$message</code> argument; when provided,
that message will be used when displaying assertion failures.</p>
<p>Additionally, each of the above has a 'Not' variant that provides a negative
assertion: <code>assertNotQuery()</code>, <code>assertNotQueryContentContains()</code>,
<code>assertNotQueryContentRegex()</code>, and <code>assertNotQueryCount()</code>. (Note that the min
and max counts do not have these variants, for what should be obvious reasons.)</p>
<h2 id="xpath-assertions">XPath Assertions</h2>
<p>Some developers are more familiar with XPath than with CSS selectors, and thus
XPath variants of all the Query assertions are also provided. These are:</p>
<ul>
<li><code>assertXpathQuery($path)</code>: assert against the given XPath selection</li>
<li><code>assertNotXpathQuery($path)</code>: assert against the given XPath selection;
  negative assertions</li>
<li><code>assertXpathQueryCount($path, $count)</code>: assert against XPath selection; should
  contain exact number of nodes</li>
<li><code>assertNotXpathQueryCount($path, $count)</code>: assert against DOM/XPath selection;
  should not contain exact number of nodes</li>
<li><code>assertXpathQueryCountMin($path, $count)</code>: assert against XPath selection;
  should contain at least this number of nodes</li>
<li><code>assertXpathQueryCountMax($path, $count)</code>: assert against XPath selection;
  should contain no more than this number of nodes</li>
<li><code>assertXpathQueryContentContains($path, $match)</code>: assert against XPath
  selection; node should contain content</li>
<li><code>assertNotXpathQueryContentContains($path, $match)</code>: assert against XPath
 selection; node should not contain content</li>
<li><code>assertXpathQueryContentRegex($path, $pattern)</code>: assert against XPath
  selection; node should match content</li>
<li><code>assertNotXpathQueryContentRegex($path, $pattern)</code>: assert against XPath
  selection; node should not match content</li>
</ul>
<h2 id="redirect-assertions">Redirect Assertions</h2>
<p>Often an action will redirect. Instead of following the redirect,
<code>Laminas\Test\PHPUnit\ControllerTestCase</code> allows you to test for redirects with a
handful of assertions.</p>
<ul>
<li><code>assertRedirect()</code>: assert simply that a redirect has occurred.</li>
<li><code>assertRedirectTo($url)</code>: assert that a redirect has occurred, and that the
  value of the <code>Location</code> header is the <code>$url</code> provided.</li>
<li><code>assertRedirectRegex($pattern)</code>: assert that a redirect has occurred, and that
  the value of the <code>Location</code> header matches the regular expression provided by
  <code>$pattern</code>.</li>
</ul>
<p>Each also has a 'Not' variant for negative assertions.</p>
<h2 id="response-header-assertions">Response Header Assertions</h2>
<p>In addition to checking for redirect headers, you will often need to check for specific HTTP
response codes and headers; for instance, to determine whether an action results in a 404 or 500
response, or to ensure that JSON responses contain the appropriate <code>Content-Type</code> header. The
following assertions are available.</p>
<ul>
<li><code>assertResponseStatusCode($code)</code>: assert that the response resulted in the
  given HTTP response code.</li>
<li><code>assertResponseHeader($header)</code>: assert that the response contains the given
  header.</li>
<li><code>assertResponseHeaderContains($header, $match)</code>: assert that the response
  contains the given header and that its content contains the given string.</li>
<li><code>assertResponseHeaderRegex($header, $pattern)</code>: assert that the response
  contains the given header and that its content matches the given regex.</li>
<li><code>assertHasResponseHeader($header)</code>: assert that the response header exists.</li>
</ul>
<p>Additionally, each of the above assertions have a 'Not' variant for negative assertions.</p>
<ul>
<li><code>assertResponseReasonPhrase($phrase)</code>: assert the the response has the given
  reason phrase</li>
</ul>
<h2 id="other-assertions">Other Assertions</h2>
<h3>Application Exceptions</h3>
<ul>
<li><code>assertApplicationException($type, $message = null)</code>: assert the given
  application exception type and message.</li>
</ul>
<h3>Template name</h3>
<ul>
<li><code>assertTemplateName($templateName)</code>: assert that a template was used somewhere
  in the view model tree.</li>
<li><code>assertNotTemplateName($templateName)</code>: assert that a template was not used
  somewhere in the view model tree.</li>
</ul>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../phpunit/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/laminas/laminas-test/edit/master/docs/book/assertions.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-test</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../phpunit/" class="subnavigation__link">Unit testing with PHPUnit</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Assertions</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-10 offset-md-2">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-10 offset-md-2"> 
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-test/blob/master/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-test/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2019-2020 by <a href="https://getlaminas.org/">The Laminas Project</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "mvc",
            siteName = 'laminas-test';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
        <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-test" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
